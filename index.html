<!DOCTYPE html>
<html>
<head>
    <title>Arduino Bluetooth Control</title>
</head>
<body>
    <h1>Arduino Bluetooth Control</h1>
    <button id="connect">Connect to Bluetooth</button>
    <button id="on">Turn On</button>
    <button id="off">Turn Off</button>

    <script>
        let bluetoothDevice;
        let writer;

        document.getElementById('connect').addEventListener('click', async () => {
            try {
                bluetoothDevice = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: ['00001101-0000-1000-8000-00805f9b34fb']
                });

                const server = await bluetoothDevice.gatt.connect();
                const service = await server.getPrimaryService('00001101-0000-1000-8000-00805f9b34fb');
                const characteristic = await service.getCharacteristic('00002a00-0000-1000-8000-00805f9b34fb');
                writer = characteristic;
                
                alert('Connected to Bluetooth');
            } catch (error) {
                console.log(error);
            }
        });

        document.getElementById('on').addEventListener('click', () => {
            sendData('1');  // Sending '1' to turn LED on
        });

        document.getElementById('off').addEventListener('click', () => {
            sendData('0');  // Sending '0' to turn LED off
        });

        function sendData(data) {
            if (writer) {
                let encoder = new TextEncoder();
                writer.writeValue(encoder.encode(data));
            }
        }
    </script>
</body>
</html>
